#!/bin/sh

# shellcheck source=bin/dotlib
. "$(dirname "$(realpath "$0")")/dotlib"

# List all POSIX shell scripts that come with the dotfiles
__dotfiles_cd_root

files="$(git ls-files --cached --others --exclude-standard)"
[ -z "$files" ] && exit 0

printf "%s\n" "$files" \
  | while IFS= read -r file; do
    if [ ! -e "$file" ] || [ -L "$file" ]; then
      continue
    fi

    if [ "${file##*.}" = "sh" ] || head -n 1 "$file" | grep -q "#!/bin/sh"; then
      echo "${file#./}"
    fi
  done
