#!/bin/sh

# Ask for the password upfront
sudo -v

# Update Homebrew and installed apps, then check if everythingâ€™s fine
if hash brew 2>/dev/null; then
  brew update && brew upgrade && brew cleanup
  brew doctor && brew cleanup --force
fi

# Update packages installed via APT
if hash apt-get 2>/dev/null; then
  sudo apt-get update
  yes | sudo apt-get dist-upgrade
  yes | sudo apt-get autoremove
  sudo apt-get autoclean
fi

# Update globally installed Node packages
npm upgrade --global

# Update RubyGems and reinstall dependencies
# (using `sudo` because of Raspberry Pi)
sudo gem update --system && sudo gem uninstall --all --executables --ignore-dependencies
sudo gem install bundler git-up

# Update Vim plugins
if hash vim 2>/dev/null; then
  vim -c "PlugUpgrade | PlugUpdate | PlugClean! | quitall"
fi

# Update Fish plugins
if hash fish 2>/dev/null; then
  fish -c "fisher up"
fi
