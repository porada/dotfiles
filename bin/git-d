#!/bin/sh

# shellcheck source=bin/dotlib
. "$(dirname "$(realpath "$0")")/dotlib"

# Nicer `git diff`
if [ $# -gt 0 ]; then
  git diff --stat --patch "$@"
else
  {
    git diff --stat --color=always "$@"
    # shellcheck disable=SC2046
    git diff-files --quiet "$@" -- $(__git_diff_excluded_paths) || echo
    # shellcheck disable=SC2046
    git diff --patch --color=always "$@" -- $(__git_diff_excluded_paths)
  } | __pager
fi
